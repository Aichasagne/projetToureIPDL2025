# Configuration de la base de données PostgreSQL
spring.datasource.url=jdbc:postgresql://localhost:5432/esp_diplomas
spring.datasource.username=ansou
spring.datasource.password=04011993
spring.datasource.driver-class-name=org.postgresql.Driver

# Configuration JPA/Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
#spring.jpa.properties.hibernate.dialect=org.postgresql.dialect.PostgreSQLDialect
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# Configuration JWT
jwt.secret=votreCleSecreteTresComplexeEtSuffisamentLonguePourHS256auMoins32Caracteres
jwt.expiration=86400000

# Configuration du serveur
server.port=8080

# Configuration CORS
cors.allowed.origins=http://localhost:3000
cors.allowed.methods=GET,POST,PUT,DELETE,OPTIONS,PATCH,HEAD
cors.allowed.headers=Authorization,Content-Type,X-Requested-With,Accept

# Configuration des tâches planifiées
spring.task.scheduling.enabled=true
spring.task.execution.pool.core-size=2
spring.task.execution.pool.max-size=5
spring.task.execution.pool.queue-capacity=100

# Configuration des messages WebSocket
spring.websocket.allowed-origins=http://localhost:3000

# Configuration des uploads de fichiers
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# Configuration de logging
logging.level.org.springframework.security=DEBUG
logging.level.com.esp.esp_diploma_bon=DEBUG
logging.level.org.springframework.messaging=DEBUG
logging.level.org.springframework.web.socket=DEBUG

# Configuration pour éviter les références circulaires
spring.main.allow-circular-references=false

# Configuration de la gestion des sessions
server.servlet.session.timeout=30m
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false

# Configuration du pool de connexions
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000

# Configuration de cache (optionnel)
spring.cache.type=simple

# Configuration de validation
spring.validation.enabled=true

# Configuration des notifications par email (pour extension future)
# spring.mail.host=smtp.gmail.com
# spring.mail.port=587
# spring.mail.username=your-email@gmail.com
# spring.mail.password=your-password
# spring.mail.properties.mail.smtp.auth=true
# spring.mail.properties.mail.smtp.starttls.enable=true

# Configuration du format de date/heure
spring.jackson.date-format=dd/MM/yyyy HH:mm:ss
spring.jackson.time-zone=Africa/Dakar

# Configuration des métriques (optionnel pour monitoring)
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized